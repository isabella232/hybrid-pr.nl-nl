---
title: Niet-voorraaddetectie met Behulp van Azure en Azure Stack Edge
description: Meer informatie over het gebruik van Azure en Azure Stack Edge om buiten voorraaddetectie te implementeren.
author: BryanLa
ms.topic: article
ms.date: 05/24/2021
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 05/24/2021
ms.openlocfilehash: b25a6391c4e64fa7018031bac4fb7d098c56b529
ms.sourcegitcommit: cf2c4033d1b169f5b63980ce1865281366905e2e
ms.translationtype: MT
ms.contentlocale: nl-NL
ms.lasthandoff: 05/25/2021
ms.locfileid: "110343872"
---
# <a name="out-of-stock-detection-at-the-edge-pattern"></a><span data-ttu-id="22343-103">Niet-voorraaddetectie aan de randpatroon</span><span class="sxs-lookup"><span data-stu-id="22343-103">Out of stock detection at the edge pattern</span></span>

<span data-ttu-id="22343-104">Dit patroon laat zien hoe u kunt bepalen of schappen geen voorraad meer hebben met behulp van een Azure Stack Edge of Azure IoT Edge apparaat- en netwerkcamera's.</span><span class="sxs-lookup"><span data-stu-id="22343-104">This pattern illustrates how to determine if shelves have out of stock items using an Azure Stack Edge or Azure IoT Edge device and network cameras.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="22343-105">Context en probleem</span><span class="sxs-lookup"><span data-stu-id="22343-105">Context and problem</span></span>

<span data-ttu-id="22343-106">Fysieke winkels verliezen verkoop, omdat wanneer klanten naar een artikel zoeken, het niet op de schappen aanwezig is.</span><span class="sxs-lookup"><span data-stu-id="22343-106">Physical retail stores lose sales because when customers look for an item, it's not present on the shelf.</span></span> <span data-ttu-id="22343-107">Het item kan zich echter achter in de winkel hebben bewaard en niet opnieuw zijn aangevuld.</span><span class="sxs-lookup"><span data-stu-id="22343-107">However, the item could have been in the back of the store and not been restocked.</span></span> <span data-ttu-id="22343-108">Winkels willen hun personeel efficiënter gebruiken en automatisch een melding ontvangen wanneer items moeten worden aangevuld.</span><span class="sxs-lookup"><span data-stu-id="22343-108">Stores would like to use their staff more efficiently and get automatically notified when items need restocking.</span></span>

## <a name="solution"></a><span data-ttu-id="22343-109">Oplossing</span><span class="sxs-lookup"><span data-stu-id="22343-109">Solution</span></span>

<span data-ttu-id="22343-110">In het voorbeeld van de oplossing wordt een edge-apparaat gebruikt, zoals een Azure Stack Edge in elk winkel, waarmee gegevens van camera's in de winkel efficiënt worden verwerkt.</span><span class="sxs-lookup"><span data-stu-id="22343-110">The solution example uses an edge device, like an Azure Stack Edge in each store, which efficiently processes data from cameras in the store.</span></span> <span data-ttu-id="22343-111">Met dit geoptimaliseerde ontwerp kunnen winkels alleen relevante gebeurtenissen en afbeeldingen naar de cloud verzenden.</span><span class="sxs-lookup"><span data-stu-id="22343-111">This optimized design lets stores send only relevant events and images to the cloud.</span></span> <span data-ttu-id="22343-112">Het ontwerp bespaart bandbreedte, opslagruimte en garandeert de privacy van klanten.</span><span class="sxs-lookup"><span data-stu-id="22343-112">The design saves bandwidth, storage space, and ensures customer privacy.</span></span> <span data-ttu-id="22343-113">Wanneer frames van elke camera worden gelezen, verwerkt een ML-model de afbeelding en retourneert het eventuele uit voorraadgebieden.</span><span class="sxs-lookup"><span data-stu-id="22343-113">As frames are read from each camera, an ML model processes the image and returns any out of stock areas.</span></span> <span data-ttu-id="22343-114">De afbeelding en buiten voorraadgebieden worden weergegeven in een lokale web-app.</span><span class="sxs-lookup"><span data-stu-id="22343-114">The image and out of stock areas are displayed on a local web app.</span></span> <span data-ttu-id="22343-115">Deze gegevens kunnen worden verzonden naar een Time Series Insight-omgeving om inzichten in uw Power BI.</span><span class="sxs-lookup"><span data-stu-id="22343-115">This data can be sent to a Time Series Insight environment to show insights in Power BI.</span></span>

![Niet op voorraad bij edge-oplossingsarchitectuur](media/pattern-out-of-stock-at-edge/solution-architecture.png)

<span data-ttu-id="22343-117">De oplossing werkt als volgende:</span><span class="sxs-lookup"><span data-stu-id="22343-117">Here's how the solution works:</span></span>

1. <span data-ttu-id="22343-118">Afbeeldingen worden vastgelegd vanaf een netwerkcamera via HTTP of RTSP.</span><span class="sxs-lookup"><span data-stu-id="22343-118">Images are captured from a network camera over HTTP or RTSP.</span></span>
2. <span data-ttu-id="22343-119">De afbeelding wordt van het ene naar het deferentie-stuurprogramma verzonden, dat communiceert met het ML-model om te bepalen of er geen afbeeldingen op voorraad zijn.</span><span class="sxs-lookup"><span data-stu-id="22343-119">The image is resized and sent to the inference driver, which communicates with the ML model to determine if there are any out of stock images.</span></span>
3. <span data-ttu-id="22343-120">Het ML-model retourneert alle uit voorraadgebieden.</span><span class="sxs-lookup"><span data-stu-id="22343-120">The ML model returns any out of stock areas.</span></span>
4. <span data-ttu-id="22343-121">Met het deferencingst stuurprogramma wordt de onbewerkte afbeelding geüpload naar een blob (indien opgegeven) en worden de resultaten van het model naar Azure IoT Hub en een begrensvakprocessor op het apparaat verzendt.</span><span class="sxs-lookup"><span data-stu-id="22343-121">The inferencing driver uploads the raw image to a blob (if specified), and sends the results from the model to Azure IoT Hub and a bounding box processor on the device.</span></span>
5. <span data-ttu-id="22343-122">Met de begrenzendvakprocessor worden begrenzen aan de afbeelding toegevoegd en wordt het pad naar de afbeelding in een in-memory database.</span><span class="sxs-lookup"><span data-stu-id="22343-122">The bounding box processor adds bounding boxes to the image and caches the image path in an in-memory database.</span></span>
6. <span data-ttu-id="22343-123">De web-app vraagt naar afbeeldingen en geeft deze weer in de ontvangen volgorde.</span><span class="sxs-lookup"><span data-stu-id="22343-123">The web app queries for images and shows them in the order received.</span></span>
7. <span data-ttu-id="22343-124">Berichten van IoT Hub worden geaggregeerd in Time Series Insights.</span><span class="sxs-lookup"><span data-stu-id="22343-124">Messages from IoT Hub are aggregated in Time Series Insights.</span></span>
8. <span data-ttu-id="22343-125">Power BI geeft een interactief rapport weer van niet-voorraaditems gedurende een periode met de gegevens uit Time Series Insights.</span><span class="sxs-lookup"><span data-stu-id="22343-125">Power BI displays an interactive report of out of stock items over time with the data from Time Series Insights.</span></span>


## <a name="components"></a><span data-ttu-id="22343-126">Onderdelen</span><span class="sxs-lookup"><span data-stu-id="22343-126">Components</span></span>

<span data-ttu-id="22343-127">Deze oplossing maakt gebruik van de volgende onderdelen:</span><span class="sxs-lookup"><span data-stu-id="22343-127">This solution uses the following components:</span></span>

| <span data-ttu-id="22343-128">Laag</span><span class="sxs-lookup"><span data-stu-id="22343-128">Layer</span></span> | <span data-ttu-id="22343-129">Onderdeel</span><span class="sxs-lookup"><span data-stu-id="22343-129">Component</span></span> | <span data-ttu-id="22343-130">Beschrijving</span><span class="sxs-lookup"><span data-stu-id="22343-130">Description</span></span> |
|----------|-----------|-------------|
| <span data-ttu-id="22343-131">On-premises hardware</span><span class="sxs-lookup"><span data-stu-id="22343-131">On-premises hardware</span></span> | <span data-ttu-id="22343-132">Netwerkcamera</span><span class="sxs-lookup"><span data-stu-id="22343-132">Network camera</span></span> | <span data-ttu-id="22343-133">Een netwerkcamera is vereist, met een HTTP- of RTSP-feed om de afbeeldingen voor de deferentie op te geven.</span><span class="sxs-lookup"><span data-stu-id="22343-133">A network camera is required, with either an HTTP or RTSP feed to provide the images for inference.</span></span> |
| <span data-ttu-id="22343-134">Azure</span><span class="sxs-lookup"><span data-stu-id="22343-134">Azure</span></span> | <span data-ttu-id="22343-135">Azure IoT Hub</span><span class="sxs-lookup"><span data-stu-id="22343-135">Azure IoT Hub</span></span> | <span data-ttu-id="22343-136">[Azure IoT Hub](/azure/iot-hub/) verwerkt het inrichten en verzenden van berichten voor de edge-apparaten.</span><span class="sxs-lookup"><span data-stu-id="22343-136">[Azure IoT Hub](/azure/iot-hub/) handles device provisioning and messaging for the edge devices.</span></span> |
|  | <span data-ttu-id="22343-137">Azure Time Series Insights</span><span class="sxs-lookup"><span data-stu-id="22343-137">Azure Time Series Insights</span></span> | <span data-ttu-id="22343-138">[Azure Time Series Insights](/azure/time-series-insights/) worden de berichten uit de IoT Hub op voor visualisatie.</span><span class="sxs-lookup"><span data-stu-id="22343-138">[Azure Time Series Insights](/azure/time-series-insights/) stores the messages from IoT Hub for visualization.</span></span> |
|  | <span data-ttu-id="22343-139">Power BI</span><span class="sxs-lookup"><span data-stu-id="22343-139">Power BI</span></span> | <span data-ttu-id="22343-140">[Microsoft Power BI](https://powerbi.microsoft.com/) bedrijfsgerichte rapporten over niet-aandelengebeurtenissen.</span><span class="sxs-lookup"><span data-stu-id="22343-140">[Microsoft Power BI](https://powerbi.microsoft.com/) provides business-focused reports of out of stock events.</span></span> <span data-ttu-id="22343-141">Power BI biedt een gebruiksvriendelijke dashboardinterface voor het weergeven van de uitvoer van Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="22343-141">Power BI provides an easy-to-use dashboard interface for viewing the output from Azure Stream Analytics.</span></span> |
| <span data-ttu-id="22343-142">Azure Stack Edge of</span><span class="sxs-lookup"><span data-stu-id="22343-142">Azure Stack Edge or</span></span><br><span data-ttu-id="22343-143">Azure IoT Edge apparaat</span><span class="sxs-lookup"><span data-stu-id="22343-143">Azure IoT Edge device</span></span> | <span data-ttu-id="22343-144">Azure IoT Edge</span><span class="sxs-lookup"><span data-stu-id="22343-144">Azure IoT Edge</span></span> | <span data-ttu-id="22343-145">[Azure IoT Edge](/azure/iot-edge/) de runtime voor de on-premises containers en verwerkt apparaatbeheer en updates.</span><span class="sxs-lookup"><span data-stu-id="22343-145">[Azure IoT Edge](/azure/iot-edge/) orchestrates the runtime for the on-premises containers and handles device management and updates.</span></span>|
| | <span data-ttu-id="22343-146">Azure-project brainwave</span><span class="sxs-lookup"><span data-stu-id="22343-146">Azure project brainwave</span></span> | <span data-ttu-id="22343-147">Op een Azure Stack Edge gebruikt [Project Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) Field-Programmable Gate Arrays (FPGA's) om ML-deferencing te versnellen.</span><span class="sxs-lookup"><span data-stu-id="22343-147">On an Azure Stack Edge device, [Project Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) uses Field-Programmable Gate Arrays (FPGAs) to accelerate ML inferencing.</span></span>|

## <a name="issues-and-considerations"></a><span data-ttu-id="22343-148">Problemen en overwegingen</span><span class="sxs-lookup"><span data-stu-id="22343-148">Issues and considerations</span></span>

<span data-ttu-id="22343-149">Houd rekening met de volgende punten bij het bepalen hoe u deze oplossing implementeert:</span><span class="sxs-lookup"><span data-stu-id="22343-149">Consider the following points when deciding how to implement this solution:</span></span>

### <a name="scalability"></a><span data-ttu-id="22343-150">Schaalbaarheid</span><span class="sxs-lookup"><span data-stu-id="22343-150">Scalability</span></span>

<span data-ttu-id="22343-151">De machine learning modellen kunnen alleen worden uitgevoerd met een bepaald aantal frames per seconde, afhankelijk van de opgegeven hardware.</span><span class="sxs-lookup"><span data-stu-id="22343-151">Most machine learning models can only run at a certain number of frames per second, depending on the provided hardware.</span></span> <span data-ttu-id="22343-152">Bepaal de optimale steekproeffrequentie van uw camera(s) om ervoor te zorgen dat er geen back-up wordt van de ML-pijplijn.</span><span class="sxs-lookup"><span data-stu-id="22343-152">Determine the optimal sample rate from your camera(s) to ensure that the ML pipeline doesn't back up.</span></span> <span data-ttu-id="22343-153">Verschillende typen hardware verwerken verschillende aantallen camera's en framesnelheden.</span><span class="sxs-lookup"><span data-stu-id="22343-153">Different types of hardware will handle different numbers of cameras and frame rates.</span></span>

### <a name="availability"></a><span data-ttu-id="22343-154">Beschikbaarheid</span><span class="sxs-lookup"><span data-stu-id="22343-154">Availability</span></span>

<span data-ttu-id="22343-155">Het is belangrijk om te overwegen wat er kan gebeuren als de connectiviteit van het edge-apparaat wordt verliest.</span><span class="sxs-lookup"><span data-stu-id="22343-155">It's important to consider what might happen if the edge device loses connectivity.</span></span> <span data-ttu-id="22343-156">Bedenk welke gegevens mogelijk verloren gaan in het Time Series Insights en Power BI dashboard.</span><span class="sxs-lookup"><span data-stu-id="22343-156">Consider what data might be lost from the Time Series Insights and Power BI dashboard.</span></span> <span data-ttu-id="22343-157">De opgegeven voorbeeldoplossing is niet ontworpen om zeer beschikbaar te zijn.</span><span class="sxs-lookup"><span data-stu-id="22343-157">The example solution as provided isn't designed to be highly available.</span></span>

### <a name="manageability"></a><span data-ttu-id="22343-158">Beheerbaarheid</span><span class="sxs-lookup"><span data-stu-id="22343-158">Manageability</span></span>

<span data-ttu-id="22343-159">Deze oplossing kan veel apparaten en locaties overspannen, wat onprakkig kan worden.</span><span class="sxs-lookup"><span data-stu-id="22343-159">This solution can span many devices and locations, which could get unwieldy.</span></span> <span data-ttu-id="22343-160">De IoT-services van Azure kunnen automatisch nieuwe locaties en apparaten online brengen en up-to-date houden.</span><span class="sxs-lookup"><span data-stu-id="22343-160">Azure's IoT services can automatically bring new locations and devices online and keep them up to date.</span></span> <span data-ttu-id="22343-161">De juiste procedures voor gegevensbeheer moeten ook worden gevolgd.</span><span class="sxs-lookup"><span data-stu-id="22343-161">Proper data governance procedures must be followed as well.</span></span>

### <a name="security"></a><span data-ttu-id="22343-162">Beveiliging</span><span class="sxs-lookup"><span data-stu-id="22343-162">Security</span></span>

<span data-ttu-id="22343-163">Met dit patroon worden mogelijk gevoelige gegevens verwerkt.</span><span class="sxs-lookup"><span data-stu-id="22343-163">This pattern handles potentially sensitive data.</span></span> <span data-ttu-id="22343-164">Zorg ervoor dat sleutels regelmatig worden geroteerd en dat de machtigingen voor het Azure Storage account en lokale shares correct zijn ingesteld.</span><span class="sxs-lookup"><span data-stu-id="22343-164">Make sure keys are regularly rotated and the permissions on the Azure Storage Account and local shares are correctly set.</span></span>

## <a name="next-steps"></a><span data-ttu-id="22343-165">Volgende stappen</span><span class="sxs-lookup"><span data-stu-id="22343-165">Next steps</span></span>

<span data-ttu-id="22343-166">Voor meer informatie over onderwerpen die in dit artikel zijn geïntroduceerd:</span><span class="sxs-lookup"><span data-stu-id="22343-166">To learn more about topics introduced in this article:</span></span>
- <span data-ttu-id="22343-167">In dit patroon worden meerdere IoT-gerelateerde services gebruikt, Azure IoT Edge [,](/azure/iot-edge/) [Azure IoT Hub](/azure/iot-hub/)en [Azure Time Series Insights.](/azure/time-series-insights/)</span><span class="sxs-lookup"><span data-stu-id="22343-167">Multiple IoT related services are used in this pattern, including [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/), and [Azure Time Series Insights](/azure/time-series-insights/).</span></span>
- <span data-ttu-id="22343-168">Zie voor meer informatie over [](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) Microsoft Project Brainwave de blogaankondiging en bekijk de Video over [versnelde Azure Machine Learning met Project Brainwave.](https://www.youtube.com/watch?v=DJfMobMjCX0)</span><span class="sxs-lookup"><span data-stu-id="22343-168">To learn more about Microsoft Project Brainwave, see [the blog announcement](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) and checkout out the [Azure Accelerated Machine Learning with Project Brainwave video](https://www.youtube.com/watch?v=DJfMobMjCX0).</span></span>
- <span data-ttu-id="22343-169">Zie [Ontwerpoverwegingen voor hybride apps](overview-app-design-considerations.md) voor meer informatie over best practices en voor antwoorden op aanvullende vragen.</span><span class="sxs-lookup"><span data-stu-id="22343-169">See [Hybrid app design considerations](overview-app-design-considerations.md) to learn more about best practices and to get answers to any additional questions.</span></span>
- <span data-ttu-id="22343-170">Zie de [Azure Stack producten en oplossingen](/azure-stack) voor meer informatie over het hele portfolio met producten en oplossingen.</span><span class="sxs-lookup"><span data-stu-id="22343-170">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="22343-171">Wanneer u klaar bent om het oplossingsvoorbeeld te testen, gaat u verder met de implementatiehandleiding voor de [Edge ML-deferencingoplossing.](https://aka.ms/edgeinferencingdeploy)</span><span class="sxs-lookup"><span data-stu-id="22343-171">When you're ready to test the solution example, continue with the [Edge ML inferencing solution deployment guide](https://aka.ms/edgeinferencingdeploy).</span></span> <span data-ttu-id="22343-172">De implementatiehandleiding bevat stapsgewijs instructies voor het implementeren en testen van de onderdelen.</span><span class="sxs-lookup"><span data-stu-id="22343-172">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>
